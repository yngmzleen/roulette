<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock Paper Scissors</title>
  <link rel="stylesheet" href="styles.css">
</head>

<style>
@import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap');

body {
  font-family: 'Ubuntu', Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  margin: 0;
  overflow-x: hidden; /* –û—Ç–∫–ª—é—á–∏—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
  color: white;
  background: url('background.jpg');
  background-size: 70%;
  
}
#overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 64px;
  color: white;
  visibility: hidden;
  opacity: 0;
  transition: visibility 0s, opacity 0.5s;
}
#overlay.win {
  background-color: rgba(102, 255, 94, 0.5);
}
#overlay.loose {
  background-color: rgba(255, 75, 75, 0.5);
}
#overlay.draw {
  background-color: rgba(0, 123, 255, 0.5);
}
#game {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
}
button {
  margin: 5px;
  padding: 10px 20px;
  font-size: 12px;
  border-radius: 40px;
  border: none;
  background-color: #00aaff; /* –ì–æ–ª—É–±–æ–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ */
  color: white;
  cursor: pointer;
  transition: background-color 0.3s;
}
button:hover {
  background-color: #5bd6ff; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π –≥–æ–ª—É–±–æ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

#result {
  font-size: 24px;
  font-weight: bold;
  margin-top: 20px;
  text-align: center;
}
#images {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
}
#player-choice, #computer-choice {
  width: 100px;
  height: 100px;
  margin: 10px;
}
.shake {
  animation: shake 0.4s;
  animation-iteration-count: 3;
}
@keyframes shake {
  0% { transform: translateY(0); }
  25% { transform: translateY(-10px); }
  50% { transform: translateY(0); }
  75% { transform: translateY(10px); }
  100% { transform: translateY(0); }
}
#balance-container {
  font-size: 24px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
}
#balance {
  margin-right: 10px;
  margin-top: 10px;
}
#balance img {
  width: 30px;
  height: 30px;
  vertical-align: middle;
}

.game-window {
  background-color: rgb(255, 255, 255); /* –ë–µ–ª—ã–π —Ü–≤–µ—Ç –æ–∫–Ω–∞ */
  padding: 20px;
  border-radius: 40px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* –¢–µ–Ω—å */
  text-align: center;
}

.menu {
  display: inline;
}

#bet-area {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}

#bet {
  width: 100%;
  margin-right: 10px;
}
#history {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 12x;
  border-radius: 40px;
  border: none;
  background-color: #00aaff; /* –ì–æ–ª—É–±–æ–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ */
  color: white;
  cursor: pointer;
  transition: background-color 0.3s;
}
#history:hover {
  background-color: #0099cc; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π –≥–æ–ª—É–±–æ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

@media (max-width: 600px) {
  /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
  #content {
    padding: 10px; /* –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
  }
}

.header {
  position: fixed;
}

.footer {
  position: fixed;
}
</style>

</head>
<header>  
  <h1>ROCK PAPER SCISSORS</h1>
</header>
<body>
  <div id="balance-container">
    <div id="balance">Balance: <span id="balance-amount">100</span><img id="money-icon" src="ton.png" alt="–î–µ–Ω—å–≥–∏"></div>
  </div>
  <div id="bet-area">
    <input type="range" id="bet" min="1" max="100" value="1">
    <span id="bet-value">1</span>
  </div>
  <div class="game-window">
    <div id="images">
      <img id="player-choice" src="rock.png" alt="Player Choice">
      <img id="computer-choice" src="rock.png" alt="Computer Choice">
    </div>
    <div id="game">
      <button onclick="playGame('rock')">RocküèîÔ∏è</button>
      <button onclick="playGame('paper')">Paperüßª</button>
      <button onclick="playGame('scissors')">Scissors‚úÇÔ∏è</button>
    </div>
  </div>
  <p id="result"></p>
  <div id="overlay"></div>

<footer>
    <div id="menu">
      <button id="tasksbutton" onclick="window.location.href='tasks.html'">Tasks‚úîÔ∏è</button>
      <button id="history" onclick="window.location.href='history.html'">Historyüìà</button>
    </div>
</footer>

  <script>
window.onload = function() {
  loadUserData();
};

    let balance = 100;
let gameHistory = [];
let wins = 0;

const betSlider = document.getElementById('bet');
const betValueDisplay = document.getElementById('bet-value');

betSlider.addEventListener('input', function() {
  betValueDisplay.textContent = this.value;
});

function playGame(playerChoice) {
  const bet = Number(document.getElementById('bet').value);
  if (isNaN(bet) || bet < 1 || bet > balance) {
    const message = languageCheckbox.checked ? 'Please enter a valid bet amount within your balance.' : '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≤–∞—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞.';
    alert(message);
    return;
  }

  const choices = ['rock', 'paper', 'scissors'];
  const computerChoice = choices[Math.floor(Math.random() * 3)];
  const playerImage = document.getElementById('player-choice');
  const computerImage = document.getElementById('computer-choice');

  // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–º–µ–Ω—å –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
  playerImage.src = 'rock.png';
  computerImage.src = 'rock.png';

  // –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
  playerImage.classList.add('shake');
  computerImage.classList.add('shake');

  // –£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —Å–º–µ–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
  setTimeout(() => {
    playerImage.classList.remove('shake');
    computerImage.classList.remove('shake');

    // –°–º–µ–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
    playerImage.src = playerChoice + '.png';
    computerImage.src = computerChoice + '.png';

    // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    const result = determineWinner(playerChoice, computerChoice);


    // –ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
    showOverlay(result);

    // –û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    updateBalance(result, bet);

    // –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    addHistoryItem(playerChoice, computerChoice, result);

    // –£–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –ø–æ–±–µ–¥, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤—ã–∏–≥—Ä–∞–ª
    if (result === 'win') {
      wins++;
    }

    // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–π—Ç–∏–Ω–≥–∞
    updateRating();

    // –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–π—Ç–∏–Ω–≥–µ
    updateRatingMessage();
  }, 1500); // 3 * 0.5s = 1.5s
}

function determineWinner(playerChoice, computerChoice) {
  if (playerChoice === computerChoice) {
    return "draw";
  }
  if (
    (playerChoice === 'rock' && computerChoice === 'scissors') ||
    (playerChoice === 'scissors' && computerChoice === 'paper') ||
    (playerChoice === 'paper' && computerChoice === 'rock')
  ) {
    return "win";
  } else {
    return "loose";
  }
}

function showOverlay(result) {
  const overlay = document.getElementById('overlay');
  overlay.className = result;
  overlay.innerText = result === "win" ? "Win!" : (result === "loose" ? "Loose!" : "Draw!");
  overlay.style.visibility = 'visible';
  overlay.style.opacity = '1';
  setTimeout(() => {
    overlay.style.visibility = 'hidden';
    overlay.style.opacity = '0';
  }, 1000); // –û–≤–µ—Ä–ª–µ–π –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω 1 —Å–µ–∫—É–Ω–¥—É
}

function updateBalance(result, bet) {
  if (result === 'win') {
    balance += bet;
    wins++;
  } else if (result === 'loose') {
    balance -= bet;
  }
  document.getElementById('balance-amount').innerText = `${balance}`;

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å –≤ localStorage
  const userData = {
    balance: balance,
    wins: wins
  };
  localStorage.setItem('userData', JSON.stringify(userData));
}

function loadUserData() {
  const userData = JSON.parse(localStorage.getItem('userData'));
  if (userData) {
    balance = userData.balance;
    wins = userData.wins;
    document.getElementById('balance-amount').innerText = `${balance}`;
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    updateRating();
  }
}

function updateBalance(result, bet) {
  if (result === 'win') {
    balance += bet;
    wins++;
  } else if (result === 'loose') {
    balance -= bet;
  }
  document.getElementById('balance-amount').innerText = `${balance}`;
  document.getElementById('wins-count').innerText = wins;
}



function updateRating() {
  const rating = document.getElementById('rating');
  const ratingImage = document.getElementById('rating-image');

  if (wins >= 4) {
    rating.value = 4;
    ratingImage.src = 'brilliant.png';
  } else if (wins >= 3) {
    rating.value = 3;
    ratingImage.src = 'gold.png';
  } else if (wins >= 2) {
    rating.value = 2;
    ratingImage.src = 'silver.png';
  } else if (wins >= 1) {
    rating.value = 1;
    ratingImage.src = 'bronze.png';
  } else {
    rating.value = 0;
  }
}

function updateRatingMessage() {
  const currentRating = document.getElementById('current-rating');
  const remainingGames = document.getElementById('remaining-games');
  if (wins >= 4) {
    currentRating.textContent = 'Brilliant';
  } else if (wins >= 3) {
    currentRating.textContent = 'Gold';
  } else if (wins >= 2) {
    currentRating.textContent = 'Silver';
  } else if (wins >= 1) {
    currentRating.textContent = 'Bronze';
  } else {
    currentRating.textContent = 'No rating';
  }
}

function toggleLanguage(checked) {
  const englishElements = document.querySelectorAll('.lang-en');


  if (checked) {
    // –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä—É—Å—Å–∫–∏–π
    englishElements.forEach(element => element.style.display = 'none');
    russianElements.forEach(element => element.style.display = 'block');
  } else {
    // –°–∫—Ä—ã–≤–∞–µ–º —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
    englishElements.forEach(element => element.style.display = 'block');
    russianElements.forEach(element => element.style.display = 'none');
  }

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ –≤ localStorage
  localStorage.setItem('language', checked ? 'en' : 'ru');

  // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  updateTextElements();
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.onload = function() {
  const language = localStorage.getItem('language') || 'en';
  const languageCheckbox = document.getElementById('language');
  languageCheckbox.checked = language === 'en';
  toggleLanguage(languageCheckbox.checked);
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
function updateTextElements() {
  const englishElements = document.querySelectorAll('.lang-en');
  const russianElements = document.querySelectorAll('.lang-ru');

  if (languageCheckbox.checked) {
    // –°–∫—Ä—ã–≤–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä—É—Å—Å–∫–∏–π
    englishElements.forEach(element => element.style.display = 'none');
    russianElements.forEach(element => element.style.display = 'block');
  } else {
    // –°–∫—Ä—ã–≤–∞–µ–º —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
    englishElements.forEach(element => element.style.display = 'block');
    russianElements.forEach(element => element.style.display = 'none');
  }
}
  </script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</body>
</html>